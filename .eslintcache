[{"C:\\Users\\q\\Desktop\\d2cr-web\\src\\component\\App.js":"1","C:\\Users\\q\\Desktop\\d2cr-web\\src\\index.js":"2","C:\\Users\\q\\Desktop\\d2cr-web\\src\\component\\ReviewMoa\\index.js":"3","C:\\Users\\q\\Desktop\\d2cr-web\\src\\component\\ReviewMoa\\SearchPanel.js":"4","C:\\Users\\q\\Desktop\\d2cr-web\\src\\component\\ReviewMoa\\Sorter.js":"5","C:\\Users\\q\\Desktop\\d2cr-web\\src\\util\\states.js":"6","C:\\Users\\q\\Desktop\\d2cr-web\\src\\component\\ReviewMoa\\ReviewItem.js":"7","C:\\Users\\q\\Desktop\\d2cr-web\\src\\component\\WordCloud.js":"8","C:\\Users\\q\\Desktop\\d2cr-web\\src\\component\\ReviewMoa\\AppHeader.js":"9","C:\\Users\\q\\Desktop\\d2cr-web\\src\\component\\ReviewMoa\\RateFilter.js":"10","C:\\Users\\q\\Desktop\\d2cr-web\\src\\api\\index.js":"11","C:\\Users\\q\\Desktop\\d2cr-web\\src\\component\\ReviewMoa\\ReviewList.js":"12","C:\\Users\\q\\Desktop\\d2cr-web\\src\\util\\format.js":"13","C:\\Users\\q\\Desktop\\d2cr-web\\src\\util\\reviews.js":"14"},{"size":250,"mtime":1611397986061,"results":"15","hashOfConfig":"16"},{"size":156,"mtime":1611321341195,"results":"17","hashOfConfig":"16"},{"size":4038,"mtime":1611400145380,"results":"18","hashOfConfig":"16"},{"size":806,"mtime":1611389493809,"results":"19","hashOfConfig":"16"},{"size":1201,"mtime":1611373961321,"results":"20","hashOfConfig":"16"},{"size":1600,"mtime":1611397286999,"results":"21","hashOfConfig":"16"},{"size":390,"mtime":1611395412064,"results":"22","hashOfConfig":"16"},{"size":564,"mtime":1611398433950,"results":"23","hashOfConfig":"16"},{"size":277,"mtime":1611376151614,"results":"24","hashOfConfig":"16"},{"size":653,"mtime":1611376533306,"results":"25","hashOfConfig":"16"},{"size":1313,"mtime":1611397427973,"results":"26","hashOfConfig":"16"},{"size":466,"mtime":1611375283012,"results":"27","hashOfConfig":"16"},{"size":264,"mtime":1611389480767,"results":"28","hashOfConfig":"16"},{"size":2492,"mtime":1611400086496,"results":"29","hashOfConfig":"16"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1epk1fi",{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"37","usedDeprecatedRules":"34"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"51"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"51"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\q\\Desktop\\d2cr-web\\src\\component\\App.js",[],"C:\\Users\\q\\Desktop\\d2cr-web\\src\\index.js",[],["63","64"],"C:\\Users\\q\\Desktop\\d2cr-web\\src\\component\\ReviewMoa\\index.js",["65","66"],"import React, { useEffect, useReducer, useState } from \"react\";\r\nimport AppHeader from \"./AppHeader\";\r\nimport SearchPanel from \"./SearchPanel\";\r\nimport ReviewList from \"./ReviewList\";\r\nimport RateFilter from \"./RateFilter\";\r\nimport Sorter from \"./Sorter\";\r\nimport \"./ReviewMoa.css\";\r\nimport { getReviews } from \"../../api\";\r\nimport { getRequestData } from \"../../util/format\";\r\nimport { reviewReducer as reducer } from \"../../util/reviews\";\r\nimport { reviewInitialState as initialState } from \"../../util/reviews\";\r\nimport { reviewActions as actions } from \"../../util/reviews\";\r\n\r\n// 한번에 로드할 리뷰 수\r\nconst loadNum = Number(process.env.REACT_APP_LOAD_NUM);\r\n\r\nexport default function ReviewMoa() {\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n\r\n  const { reviews, searchKeyword, rateFilter, sorter, sorterDir, offset } = state;\r\n\r\n  const [reloading, setReloading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    // 스크롤 이벤트 핸들러\r\n    const handleScroll = () => {\r\n      let scrollHeight = Math.max(document.documentElement.scrollHeight, document.body.scrollHeight);\r\n      let scrollTop = Math.max(document.documentElement.scrollTop, document.body.scrollTop);\r\n      let clientHeight = document.documentElement.clientHeight;\r\n\r\n      if (scrollTop + clientHeight >= scrollHeight) {\r\n        setOffset(offset + loadNum);\r\n        console.log(\"데이터를 더 불러오는 중...\");\r\n      }\r\n    };\r\n\r\n    window.addEventListener(\"scroll\", handleScroll);\r\n    return () => {\r\n      window.removeEventListener(\"scroll\", handleScroll);\r\n    };\r\n  });\r\n\r\n  const getCurrentRequestData = () => getRequestData(searchKeyword, rateFilter, sorter, sorterDir);\r\n\r\n  useEffect(() => {\r\n\t\t\tif (offset !== 0) {\r\n\t\t\tconsole.log(\"스크롤의 끝에 도달해서 새로운 데이터를 불러옵니다!\");\r\n\r\n\t\t\tasync function fetchReviews() {\r\n\t\t\t\tconst requestData = getCurrentRequestData();\r\n\t\t\t\tconst path = window.location.pathname;\r\n\t\t\t\tconst newReviews = await getReviews(path, requestData, offset);\r\n\t\t\t\tdispatch(actions.LOAD_MORE_REVIEWS(newReviews));\r\n\t\t\t}\r\n\t\t\tfetchReviews();\r\n\t\t}\r\n  }, [offset]);\r\n\r\n  useEffect(() => {\r\n    if (reloading === true) {\r\n\t\t\tconsole.log(\"쿼리가 바뀌어서 새로운 데이터를 불러옵니다!\");\r\n\r\n      async function fetchReviews() {\r\n        const requestData = getCurrentRequestData();\r\n        const path = window.location.pathname;\r\n        const newReviews = await getReviews(path, requestData, 0);\r\n        dispatch(actions.INIT_REVIEWS(newReviews));\r\n        setReloading(false);\r\n        setOffset(0);\r\n      }\r\n      fetchReviews();\r\n    }\r\n  }, [reloading]);\r\n\r\n  // 쿼리가 바뀌었을 때 처음 15개 데이터만 로드\r\n  useEffect(() => {\r\n    setReloading(true);\r\n    console.log(\"쿼리가 바뀜\");\r\n  }, [searchKeyword, rateFilter, sorter, sorterDir]);\r\n\r\n  const onSearchChange = (_searchKeyword) => {\r\n    dispatch(actions.SET_SEARCH(_searchKeyword));\r\n  };\r\n\r\n  const onRateFilterChange = (_rate) => {\r\n    dispatch(actions.SET_RATE_FILTER(getRateFilter(_rate)));\r\n  };\r\n\r\n  const getRateFilter = (_rate) => {\r\n    if (rateFilter.includes(_rate)) return rateFilter.filter((item) => item !== _rate);\r\n    else return [...rateFilter, _rate];\r\n  };\r\n\r\n  const onSorterChange = (_sorter) => {\r\n    dispatch(actions.SET_SORTER(_sorter));\r\n  };\r\n\r\n  const onSorterDirChange = (_sorterDir) => {\r\n    dispatch(actions.SET_SORTER_DIR(_sorterDir));\r\n  };\r\n\r\n  const setOffset = (_offset) => {\r\n    dispatch(actions.SET_OFFSET(_offset));\r\n  };\r\n\r\n  return (\r\n    <div className=\"review-app\">\r\n      <AppHeader reviewCount={reviews.length} />\r\n      <div className=\"top-panel d-flex\">\r\n        <SearchPanel onSearchChange={onSearchChange} />\r\n        <RateFilter rateFilter={rateFilter} onRateFilterChange={onRateFilterChange} />\r\n        <Sorter sorter={sorter} onSorterChange={onSorterChange} onSorterDirChange={onSorterDirChange} sorterDir={sorterDir} />\r\n      </div>\r\n      <ReviewList reviews={reviews} />\r\n    </div>\r\n  );\r\n}\r\n","C:\\Users\\q\\Desktop\\d2cr-web\\src\\component\\ReviewMoa\\SearchPanel.js",[],"C:\\Users\\q\\Desktop\\d2cr-web\\src\\component\\ReviewMoa\\Sorter.js",[],["67","68"],"C:\\Users\\q\\Desktop\\d2cr-web\\src\\util\\states.js",[],"C:\\Users\\q\\Desktop\\d2cr-web\\src\\component\\ReviewMoa\\ReviewItem.js",[],"C:\\Users\\q\\Desktop\\d2cr-web\\src\\component\\WordCloud.js",[],"C:\\Users\\q\\Desktop\\d2cr-web\\src\\component\\ReviewMoa\\AppHeader.js",[],["69","70"],"C:\\Users\\q\\Desktop\\d2cr-web\\src\\component\\ReviewMoa\\RateFilter.js",[],"C:\\Users\\q\\Desktop\\d2cr-web\\src\\api\\index.js",["71"],"C:\\Users\\q\\Desktop\\d2cr-web\\src\\component\\ReviewMoa\\ReviewList.js",[],"C:\\Users\\q\\Desktop\\d2cr-web\\src\\util\\format.js",[],["72","73"],"C:\\Users\\q\\Desktop\\d2cr-web\\src\\util\\reviews.js",[],{"ruleId":"74","replacedBy":"75"},{"ruleId":"76","replacedBy":"77"},{"ruleId":"78","severity":1,"message":"79","line":57,"column":6,"nodeType":"80","endLine":57,"endColumn":14,"suggestions":"81"},{"ruleId":"78","severity":1,"message":"79","line":73,"column":6,"nodeType":"80","endLine":73,"endColumn":17,"suggestions":"82"},{"ruleId":"74","replacedBy":"83"},{"ruleId":"76","replacedBy":"84"},{"ruleId":"74","replacedBy":"85"},{"ruleId":"76","replacedBy":"86"},{"ruleId":"87","severity":1,"message":"88","line":4,"column":7,"nodeType":"89","messageId":"90","endLine":4,"endColumn":14},{"ruleId":"74","replacedBy":"91"},{"ruleId":"76","replacedBy":"92"},"no-native-reassign",["93"],"no-negated-in-lhs",["94"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'getCurrentRequestData'. Either include it or remove the dependency array.","ArrayExpression",["95"],["96"],["93"],["94"],["93"],["94"],"no-unused-vars","'loadNum' is assigned a value but never used.","Identifier","unusedVar",["93"],["94"],"no-global-assign","no-unsafe-negation",{"desc":"97","fix":"98"},{"desc":"99","fix":"100"},"Update the dependencies array to be: [getCurrentRequestData, offset]",{"range":"101","text":"102"},"Update the dependencies array to be: [getCurrentRequestData, reloading]",{"range":"103","text":"104"},[2035,2043],"[getCurrentRequestData, offset]",[2507,2518],"[getCurrentRequestData, reloading]"]